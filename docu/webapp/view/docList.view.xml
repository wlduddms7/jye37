<mvc:View controllerName="cl3.syncyoung.mm.doc.docu.controller.docList"
    xmlns:mvc="sap.ui.core.mvc" displayBlock="true"
    xmlns="sap.m"
    xmlns:t="sap.ui.table" xmlns:viz.feeds="sap.viz.ui5.controls.common.feeds"
    xmlns:viz.data="sap.viz.ui5.data" xmlns:viz="sap.viz.ui5.controls">
    <Page id="page" title="{i18n>title}">
       <SplitContainer id="DocList" initialDetail="detail" initialMaster="master">
            <masterPages>
                <Page
                    id="master"
                    title="자재문서 Header"
                    backgroundDesign= "List">
                    <List items="{/DocsSet}" class="bg_li">
                        <StandardListItem title="{Mblnr}" icon="sap-icon://document" type="Navigation" press=".onItems" />
                    </List>
                </Page>
            </masterPages>
            <detailPages>
                <Page id="detail1" class="" title="자재문서 ITEM"  backgroundDesign= "Solid">
                   <!-- 자재문서 item -->
                    <t:Table id="item" rows="{/DocsItemSet}" 
                             selectionMode="Single"
                             paste="onPaste"
                             ariaLabelledBy="title"
                             visibleRowCount="5"
                             selectionBehavior="RowOnly">
                        <t:columns>
                            <t:Column width="7rem">
                                <Label text="자재문서번호"/>
                                <t:template >
                                    <Text text="{Mblnr}" wrapping="false" />
                                </t:template>
                            </t:Column>
                            <t:Column width="8rem">
                                <Label text="자재문서연도"/>
                                <t:template>
                                    <Text text="{Mjahr}" wrapping="false" />
                                </t:template>
                            </t:Column>
                            <t:Column width="8rem">
                                <Label text="자재코드"/>
                                <t:template>
                                    <Text text="{Matnr}" wrapping="false" />
                                </t:template>
                            </t:Column>
                            <t:Column width="15rem">
                                <Label text="자재명"/>
                                <t:template>
                                    <Text text="{Maktx}" class="bg_color" wrapping="false" />
                                </t:template>
                            </t:Column>
                            <t:Column width="7rem">
                                <Label text="창고코드"/>
                                <t:template>
                                    <Text text="{Scode}" wrapping="false" />
                                </t:template>
                            </t:Column>
                            <t:Column width="5rem">
                                <Label text="이동유형"/>
                                <t:template>
                                    <Text text="{Movetype}" wrapping="false" />
                                </t:template>
                            </t:Column>
                            <t:Column width="7rem">
                                <Label text="일자"/>
                                <t:template>
                                    <Text text="{Budat}" wrapping="false" />
                                </t:template>
                            </t:Column>
                            <t:Column width="5rem">
                                <Label text="수량"/>
                                <t:template>
                                    <Text text="{Menge}" wrapping="false" />
                                </t:template>
                            </t:Column>
                            <t:Column width="5rem">
                                <Label text="단위"/>
                                <t:template>
                                    <Text text="{Meins}" wrapping="false" />
                                </t:template>
                            </t:Column>
                            <t:Column width="8rem">
                                <Label text="단가"/>
                                <t:template>
                                    <!-- <Text text="{Netwr}" wrapping="false" /> -->
                                    <Text text="{
                                        parts:[{path:'Netwr'},{path:'Waers'}],
                                        type: 'sap.ui.model.type.Currency',
                                        formatOptions: {showMeasure: true }
                                        }" wrapping="false" />
                                </t:template>
                            </t:Column>
                            <t:Column width="7rem">
                                <Label text="품질검수번호"/>
                                <t:template>
                                    <Text text="{Qinum}" wrapping="false" />
                                </t:template>
                            </t:Column>
                            <t:Column width="7rem">
                                <Label text="거래처코드"/>
                                <t:template>
                                    <Text text="{Bpcode}" wrapping="false" />
                                </t:template>
                            </t:Column>
                        </t:columns>
                    </t:Table>
                    <!-- 입출고 현황 차트 -->
                    <viz:VizFrame id="idVizFrame" uiConfig="{applicationSet:'fiori'}"
                        height='60%' width="100%" vizType='donut' vizProperties="{ title: {text : '창고코드별 입출고 현황', visible : true}}">
                        <viz:dataset>
                            <viz.data:FlattenedDataset data="{Doc>/DocSet}">
                                <viz.data:dimensions>
                                    <viz.data:DimensionDefinition name="StoreName"
                                        value="{Doc>scode}" />
                                    <viz.data:DimensionDefinition name="MoveType"
                                        value="{Doc>movetype_string}" />
                                </viz.data:dimensions>
                                <viz.data:measures>
                                    <viz.data:MeasureDefinition name="Revenue"
                                        value="{Doc>type2}" />
                                </viz.data:measures>
                            </viz.data:FlattenedDataset>
                        </viz:dataset>

                        <viz:feeds>
                            <viz.feeds:FeedItem uid="size" type="Measure" values="Revenue" />
                            <viz.feeds:FeedItem uid="color" type="Dimension" values="MoveType" />
                            <viz.feeds:FeedItem uid="color" type="Dimension" values="StoreName" />
                        </viz:feeds>
                        <viz:dependents>
                            <viz:Popover id="idPopOver"></viz:Popover>
                        </viz:dependents>
                    </viz:VizFrame>
                </Page>
            </detailPages>
            


       </SplitContainer>
    </Page>
</mvc:View>
